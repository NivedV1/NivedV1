<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Image Slideshow</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Custom styles for the overlay and positioning */
        .slider-container {
            position: relative;
            /* Using CSS variable to dynamically set the aspect ratio. Default is 16/9. */
            aspect-ratio: var(--slide-ratio, 16 / 9); 
            max-height: 80vh;
            /* Smooth transition for the container size change */
            transition: aspect-ratio 0.5s ease-in-out; 
        }

        /* Image styling for smooth transitions */
        .slide-image {
            /* Fade and slow zoom animation */
            transition: opacity 1s ease-in-out, transform 4s ease-in-out;
            opacity: 0;
            transform: scale(1.05); /* Start slightly zoomed for the 'zoom-out' effect */
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .slide-image.active {
            opacity: 1;
            transform: scale(1.00); /* Zoom back to normal size over 4s */
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">HEY NANDOOSEh1>

        <!-- Slideshow Container -->
        <div id="slideshow" class="slider-container rounded-xl overflow-hidden shadow-2xl bg-gray-900">
            
            <!-- Slides (Dynamically populated by JS) -->
            <div id="slides-wrapper" class="w-full h-full relative">
                <!-- Image elements will be inserted here by JavaScript -->
            </div>

            <!-- NOTE: Image Caption Overlay has been removed -->
        </div>

        <!-- Download Button Added Here -->
        <div class="text-center mt-8">
            <a 
                href="./download.zip" 
                download
                class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out transform hover:scale-105"
            >
                <!-- Inline SVG for a clean download icon (Lucide icon) -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/>
                </svg>
                Download Full Gallery Zip
            </a>
        </div>
        
    </div>

    <script>
        const SLIDES = [
            { url: './images/1.JPG', caption: 'Image 1' },
            { url: './images/2.JPG', caption: 'Image 2' },
            { url: './images/3.JPG', caption: 'Image 3' },
            { url: './images/4.JPG', caption: 'Image 4' },
            { url: './images/5.JPG', caption: 'Image 5' },
            { url: './images/6.JPG', caption: 'Image 6' },
            { url: './images/7.JPG', caption: 'Image 7' },
            { url: './images/8.JPG', caption: 'Image 8' },
            { url: './images/9.JPG', caption: 'Image 9' },
            { url: './images/10.JPG', caption: 'Image 10' },
            { url: './images/11.JPG', caption: 'Image 11' },
            { url: './images/12.JPG', caption: 'Image 12' },
            { url: './images/13.JPG', caption: 'Image 13' },
            { url: './images/14.JPG', caption: 'Image 14' },
            { url: './images/15.JPG', caption: 'Image 15' }
        ];

        let currentSlideIndex = 0;
        let autoplayInterval;
        const intervalTime = 4000; // 5 seconds

        const slidesWrapper = document.getElementById('slides-wrapper');
        const sliderContainer = document.getElementById('slideshow');
        
        // Removed reference to captionElement

        /**
         * Renders the HTML for the slide images.
         */
        function renderSlides() {
            SLIDES.forEach((slide, index) => {
                // Create Image Element
                const img = document.createElement('img');
                img.src = slide.url;
                img.alt = slide.caption;
                img.classList.add('slide-image', 'absolute', 'inset-0');
                img.dataset.index = index;
                // Add a fallback for image loading errors
                img.onerror = function() {
                    console.error(`Error loading image: ${slide.url}`);
                    this.src = 'https://placehold.co/1280x720/6b7280/ffffff?text=Image+Missing';
                    // Use a default ratio if image fails to load
                    slide.ratio = 16 / 9; 
                };
                slidesWrapper.appendChild(img);
            });
        }

        /**
         * Updates the UI to show the specified slide with animation.
         * @param {number} index - The index of the slide to display.
         */
        function showSlide(index) {
            currentSlideIndex = (index + SLIDES.length) % SLIDES.length;

            const allImages = slidesWrapper.querySelectorAll('.slide-image');
            const activeSlide = SLIDES[currentSlideIndex];

            // 1. Dynamically update the container's aspect ratio (frame size)
            // The aspect-ratio is set to 16/9 if the ratio property is missing (e.g., if loading failed)
            sliderContainer.style.setProperty('--slide-ratio', `${activeSlide.ratio || (16 / 9)}`);

            // 2. Update Images and Animation
            allImages.forEach(img => {
                const isActive = parseInt(img.dataset.index) === currentSlideIndex;
                img.classList.remove('active');
                if (isActive) {
                    // Force a reflow before adding 'active' to ensure CSS transition runs
                    void img.offsetWidth; 
                    img.classList.add('active');
                }
            });

            // Removed: Caption update logic
        }

        /**
         * Navigation function for the autoplay loop
         */
        function nextSlide() {
            showSlide(currentSlideIndex + 1);
        }

        /**
         * Autoplay control
         */
        function startAutoplay() {
            if (!autoplayInterval) {
                // Set interval to change slides automatically
                autoplayInterval = setInterval(nextSlide, intervalTime);
            }
        }

        /**
         * Preloads images and calculates their natural aspect ratio (width / height).
         * @returns {Promise<void>}
         */
        function loadImagesAndGetRatios() {
            const ratioPromises = SLIDES.map((slide) => {
                return new Promise((resolve) => {
                    const img = new Image();
                    img.onload = () => {
                        // Calculate and store ratio directly in the slide object
                        slide.ratio = img.naturalWidth / img.naturalHeight;
                        resolve();
                    };
                    img.onerror = () => {
                        // Fallback to a default ratio (16:9) if image fails to load
                        slide.ratio = 16 / 9; 
                        resolve();
                    };
                    img.src = slide.url;
                });
            });

            return Promise.all(ratioPromises);
        }


        /**
         * Initialization
         */
        function initSlider() {
            if (SLIDES.length === 0) return;

            // Wait for all image ratios to be calculated before starting the slideshow
            loadImagesAndGetRatios().then(() => {
                renderSlides();
                showSlide(currentSlideIndex);
                startAutoplay();
            });
        }

        window.onload = initSlider;
    </script>
</body>
</html>
